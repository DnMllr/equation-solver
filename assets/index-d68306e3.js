(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(l){if(l.ep)return;l.ep=!0;const s=r(l);fetch(l.href,s)}})();const Qt=(e,t)=>e===t,B=Symbol("solid-proxy"),pe=Symbol("solid-track"),ye={equals:Qt};let Yt=Ot;const W=1,me=2,pt={owned:null,cleanups:null,context:null,owner:null};var E=null;let Ce=null,k=null,A=null,X=null,ke=0;function ee(e,t){const r=k,n=E,l=e.length===0,s=l?pt:{owned:null,cleanups:null,context:null,owner:t===void 0?n:t},i=l?e:()=>e(()=>F(()=>$e(s)));E=s,k=null;try{return oe(i,!0)}finally{k=r,E=n}}function Oe(e,t){t=t?Object.assign({},ye,t):ye;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=l=>(typeof l=="function"&&(l=l(r.value)),wt(r,l));return[mt.bind(r),n]}function j(e,t,r){const n=xt(e,t,!1,W);Te(n)}function L(e,t,r){r=r?Object.assign({},ye,r):ye;const n=xt(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,Te(n),mt.bind(n)}function Zt(e){return oe(e,!1)}function F(e){if(k===null)return e();const t=k;k=null;try{return e()}finally{k=t}}function We(e){return E===null||(E.cleanups===null?E.cleanups=[e]:E.cleanups.push(e)),e}function yt(){return k}function er(){return E}function J(e){const t=L(e),r=L(()=>Be(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}function mt(){if(this.sources&&this.state)if(this.state===W)Te(this);else{const e=A;A=null,oe(()=>we(this),!1),A=e}if(k){const e=this.observers?this.observers.length:0;k.sources?(k.sources.push(this),k.sourceSlots.push(e)):(k.sources=[this],k.sourceSlots=[e]),this.observers?(this.observers.push(k),this.observerSlots.push(k.sources.length-1)):(this.observers=[k],this.observerSlots=[k.sources.length-1])}return this.value}function wt(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&oe(()=>{for(let l=0;l<e.observers.length;l+=1){const s=e.observers[l],i=Ce&&Ce.running;i&&Ce.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?A.push(s):X.push(s),s.observers&&Tt(s)),i||(s.state=W)}if(A.length>1e6)throw A=[],new Error},!1)),t}function Te(e){if(!e.fn)return;$e(e);const t=E,r=k,n=ke;k=E=e,tr(e,e.value,n),k=r,E=t}function tr(e,t,r){let n;try{n=e.fn(t)}catch(l){return e.pure&&(e.state=W,e.owned&&e.owned.forEach($e),e.owned=null),e.updatedAt=r+1,$t(l)}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?wt(e,n):e.value=n,e.updatedAt=r)}function xt(e,t,r,n=W,l){const s={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:E,context:null,pure:r};return E===null||E!==pt&&(E.owned?E.owned.push(s):E.owned=[s]),s}function kt(e){if(e.state===0)return;if(e.state===me)return we(e);if(e.suspense&&F(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ke);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===W)Te(e);else if(e.state===me){const n=A;A=null,oe(()=>we(e,t[0]),!1),A=n}}function oe(e,t){if(A)return e();let r=!1;t||(A=[]),X?r=!0:X=[],ke++;try{const n=e();return rr(r),n}catch(n){r||(X=null),A=null,$t(n)}}function rr(e){if(A&&(Ot(A),A=null),e)return;const t=X;X=null,t.length&&oe(()=>Yt(t),!1)}function Ot(e){for(let t=0;t<e.length;t++)kt(e[t])}function we(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const l=n.state;l===W?n!==t&&(!n.updatedAt||n.updatedAt<ke)&&kt(n):l===me&&we(n,t)}}}function Tt(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=me,r.pure?A.push(r):X.push(r),r.observers&&Tt(r))}}function $e(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),l=r.observers;if(l&&l.length){const s=l.pop(),i=r.observerSlots.pop();n<l.length&&(s.sourceSlots[i]=n,l[n]=s,r.observerSlots[n]=i)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)$e(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function $t(e){throw e}function Be(e){if(typeof e=="function"&&!e.length)return Be(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Be(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}const Le=Symbol("fallback");function xe(e){for(let t=0;t<e.length;t++)e[t]()}function nr(e,t,r={}){let n=[],l=[],s=[],i=0,o=t.length>1?[]:null;return We(()=>xe(s)),()=>{let u=e()||[],c,a;return u[pe],F(()=>{let h=u.length,g,x,m,$,P,N,C,q,Q;if(h===0)i!==0&&(xe(s),s=[],n=[],l=[],i=0,o&&(o=[])),r.fallback&&(n=[Le],l[0]=ee(Jt=>(s[0]=Jt,r.fallback())),i=1);else if(i===0){for(l=new Array(h),a=0;a<h;a++)n[a]=u[a],l[a]=ee(f);i=h}else{for(m=new Array(h),$=new Array(h),o&&(P=new Array(h)),N=0,C=Math.min(i,h);N<C&&n[N]===u[N];N++);for(C=i-1,q=h-1;C>=N&&q>=N&&n[C]===u[q];C--,q--)m[q]=l[C],$[q]=s[C],o&&(P[q]=o[C]);for(g=new Map,x=new Array(q+1),a=q;a>=N;a--)Q=u[a],c=g.get(Q),x[a]=c===void 0?-1:c,g.set(Q,a);for(c=N;c<=C;c++)Q=n[c],a=g.get(Q),a!==void 0&&a!==-1?(m[a]=l[c],$[a]=s[c],o&&(P[a]=o[c]),a=x[a],g.set(Q,a)):s[c]();for(a=N;a<h;a++)a in m?(l[a]=m[a],s[a]=$[a],o&&(o[a]=P[a],o[a](a))):l[a]=ee(f);l=l.slice(0,i=h),n=u.slice(0)}return l});function f(h){if(s[a]=h,o){const[g,x]=Oe(a);return o[a]=x,t(u[a],g)}return t(u[a])}}}function sr(e,t,r={}){let n=[],l=[],s=[],i=[],o=0,u;return We(()=>xe(s)),()=>{const c=e()||[];return c[pe],F(()=>{if(c.length===0)return o!==0&&(xe(s),s=[],n=[],l=[],o=0,i=[]),r.fallback&&(n=[Le],l[0]=ee(f=>(s[0]=f,r.fallback())),o=1),l;for(n[0]===Le&&(s[0](),s=[],n=[],l=[],o=0),u=0;u<c.length;u++)u<n.length&&n[u]!==c[u]?i[u](()=>c[u]):u>=n.length&&(l[u]=ee(a));for(;u<n.length;u++)s[u]();return o=i.length=s.length=c.length,n=c.slice(0),l=l.slice(0,o)});function a(f){s[u]=f;const[h,g]=Oe(c[u]);return i[u]=g,t(h,u)}}}function d(e,t){return F(()=>e(t||{}))}function be(){return!0}const Re={get(e,t,r){return t===B?r:e.get(t)},has(e,t){return t===B?!0:e.has(t)},set:be,deleteProperty:be,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:be,deleteProperty:be}},ownKeys(e){return e.keys()}};function Me(e){return(e=typeof e=="function"?e():e)?e:{}}function lr(){for(let e=0,t=this.length;e<t;++e){const r=this[e]();if(r!==void 0)return r}}function it(...e){let t=!1;for(let s=0;s<e.length;s++){const i=e[s];t=t||!!i&&B in i,e[s]=typeof i=="function"?(t=!0,L(i)):i}if(t)return new Proxy({get(s){for(let i=e.length-1;i>=0;i--){const o=Me(e[i])[s];if(o!==void 0)return o}},has(s){for(let i=e.length-1;i>=0;i--)if(s in Me(e[i]))return!0;return!1},keys(){const s=[];for(let i=0;i<e.length;i++)s.push(...Object.keys(Me(e[i])));return[...new Set(s)]}},Re);const r={},n={};let l=!1;for(let s=e.length-1;s>=0;s--){const i=e[s];if(!i)continue;const o=Object.getOwnPropertyNames(i);l=l||s!==0&&!!o.length;for(let u=0,c=o.length;u<c;u++){const a=o[u];if(!(a==="__proto__"||a==="constructor"))if(a in r){const f=n[a],h=Object.getOwnPropertyDescriptor(i,a);f?h.get?f.push(h.get.bind(i)):h.value!==void 0&&f.push(()=>h.value):r[a]===void 0&&(r[a]=h.value)}else{const f=Object.getOwnPropertyDescriptor(i,a);f.get?Object.defineProperty(r,a,{enumerable:!0,configurable:!0,get:lr.bind(n[a]=[f.get.bind(i)])}):r[a]=f.value}}}return r}function ir(e,...t){if(B in e){const l=new Set(t.length>1?t.flat():t[0]),s=t.map(i=>new Proxy({get(o){return i.includes(o)?e[o]:void 0},has(o){return i.includes(o)&&o in e},keys(){return i.filter(o=>o in e)}},Re));return s.push(new Proxy({get(i){return l.has(i)?void 0:e[i]},has(i){return l.has(i)?!1:i in e},keys(){return Object.keys(e).filter(i=>!l.has(i))}},Re)),s}const r={},n=t.map(()=>({}));for(const l of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,l),i=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let o=!1,u=0;for(const c of t)c.includes(l)&&(o=!0,i?n[u][l]=s.value:Object.defineProperty(n[u],l,s)),++u;o||(i?r[l]=s.value:Object.defineProperty(r,l,s))}return[...n,r]}const Et=e=>`Stale read from <${e}>.`;function or(e){const t="fallback"in e&&{fallback:()=>e.fallback};return L(nr(()=>e.each,e.children,t||void 0))}function At(e){const t="fallback"in e&&{fallback:()=>e.fallback};return L(sr(()=>e.each,e.children,t||void 0))}function Pt(e){const t=e.keyed,r=L(()=>e.when,void 0,{equals:(n,l)=>t?n===l:!n==!l});return L(()=>{const n=r();if(n){const l=e.children;return typeof l=="function"&&l.length>0?F(()=>l(t?n:()=>{if(!F(r))throw Et("Show");return e.when})):l}return e.fallback},void 0,void 0)}function ue(e){let t=!1;const r=(s,i)=>s[0]===i[0]&&(t?s[1]===i[1]:!s[1]==!i[1])&&s[2]===i[2],n=J(()=>e.children),l=L(()=>{let s=n();Array.isArray(s)||(s=[s]);for(let i=0;i<s.length;i++){const o=s[i].when;if(o)return t=!!s[i].keyed,[i,o,s[i]]}return[-1]},void 0,{equals:r});return L(()=>{const[s,i,o]=l();if(s<0)return e.fallback;const u=o.children;return typeof u=="function"&&u.length>0?F(()=>u(t?i:()=>{if(F(l)[0]!==s)throw Et("Match");return o.when})):u},void 0,void 0)}function w(e){return e}const ur=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],cr=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...ur]),ar=new Set(["innerHTML","textContent","innerText","children"]),fr=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),dr=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function hr(e,t){const r=dr[e];return typeof r=="object"?r[t]?r.$:void 0:r}const gr=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),br={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function vr(e,t,r){let n=r.length,l=t.length,s=n,i=0,o=0,u=t[l-1].nextSibling,c=null;for(;i<l||o<s;){if(t[i]===r[o]){i++,o++;continue}for(;t[l-1]===r[s-1];)l--,s--;if(l===i){const a=s<n?o?r[o-1].nextSibling:r[s-o]:u;for(;o<s;)e.insertBefore(r[o++],a)}else if(s===o)for(;i<l;)(!c||!c.has(t[i]))&&t[i].remove(),i++;else if(t[i]===r[s-1]&&r[o]===t[l-1]){const a=t[--l].nextSibling;e.insertBefore(r[o++],t[i++].nextSibling),e.insertBefore(r[--s],a),t[l]=r[s]}else{if(!c){c=new Map;let f=o;for(;f<s;)c.set(r[f],f++)}const a=c.get(t[i]);if(a!=null)if(o<a&&a<s){let f=i,h=1,g;for(;++f<l&&f<s&&!((g=c.get(t[f]))==null||g!==a+h);)h++;if(h>a-o){const x=t[i];for(;o<a;)e.insertBefore(r[o++],x)}else e.replaceChild(r[o++],t[i++])}else i++;else t[i++].remove()}}}const ot="_$DX_DELEGATE";function pr(e,t,r,n={}){let l;return ee(s=>{l=s,t===document?e():b(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{l(),t.textContent=""}}function v(e,t,r){let n;const l=()=>{const i=document.createElement("template");return i.innerHTML=e,r?i.content.firstChild.firstChild:i.content.firstChild},s=t?()=>F(()=>document.importNode(n||(n=l()),!0)):()=>(n||(n=l())).cloneNode(!0);return s.cloneNode=s,s}function Je(e,t=window.document){const r=t[ot]||(t[ot]=new Set);for(let n=0,l=e.length;n<l;n++){const s=e[n];r.has(s)||(r.add(s),t.addEventListener(s,$r))}}function Fe(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function yr(e,t,r,n){n==null?e.removeAttributeNS(t,r):e.setAttributeNS(t,r,n)}function V(e,t){t==null?e.removeAttribute("class"):e.className=t}function mr(e,t,r,n){if(n)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const l=r[0];e.addEventListener(t,r[0]=s=>l.call(e,r[1],s))}else e.addEventListener(t,r)}function wr(e,t,r={}){const n=Object.keys(t||{}),l=Object.keys(r);let s,i;for(s=0,i=l.length;s<i;s++){const o=l[s];!o||o==="undefined"||t[o]||(ut(e,o,!1),delete r[o])}for(s=0,i=n.length;s<i;s++){const o=n[s],u=!!t[o];!o||o==="undefined"||r[o]===u||!u||(ut(e,o,!0),r[o]=u)}return r}function xr(e,t,r){if(!t)return r?Fe(e,"style"):t;const n=e.style;if(typeof t=="string")return n.cssText=t;typeof r=="string"&&(n.cssText=r=void 0),r||(r={}),t||(t={});let l,s;for(s in r)t[s]==null&&n.removeProperty(s),delete r[s];for(s in t)l=t[s],l!==r[s]&&(n.setProperty(s,l),r[s]=l);return r}function kr(e,t={},r,n){const l={};return n||j(()=>l.children=te(e,t.children,l.children)),j(()=>t.ref&&t.ref(e)),j(()=>Or(e,t,r,!0,l,!0)),l}function b(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return te(e,t,n,r);j(l=>te(e,t(),l,r),n)}function Or(e,t,r,n,l={},s=!1){t||(t={});for(const i in l)if(!(i in t)){if(i==="children")continue;l[i]=ct(e,i,null,l[i],r,s)}for(const i in t){if(i==="children"){n||te(e,t.children);continue}const o=t[i];l[i]=ct(e,i,o,l[i],r,s)}}function Tr(e){return e.toLowerCase().replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function ut(e,t,r){const n=t.trim().split(/\s+/);for(let l=0,s=n.length;l<s;l++)e.classList.toggle(n[l],r)}function ct(e,t,r,n,l,s){let i,o,u,c,a;if(t==="style")return xr(e,r,n);if(t==="classList")return wr(e,r,n);if(r===n)return n;if(t==="ref")s||r(e);else if(t.slice(0,3)==="on:"){const f=t.slice(3);n&&e.removeEventListener(f,n),r&&e.addEventListener(f,r)}else if(t.slice(0,10)==="oncapture:"){const f=t.slice(10);n&&e.removeEventListener(f,n,!0),r&&e.addEventListener(f,r,!0)}else if(t.slice(0,2)==="on"){const f=t.slice(2).toLowerCase(),h=gr.has(f);if(!h&&n){const g=Array.isArray(n)?n[0]:n;e.removeEventListener(f,g)}(h||r)&&(mr(e,f,r,h),h&&Je([f]))}else if(t.slice(0,5)==="attr:")Fe(e,t.slice(5),r);else if((a=t.slice(0,5)==="prop:")||(u=ar.has(t))||!l&&((c=hr(t,e.tagName))||(o=cr.has(t)))||(i=e.nodeName.includes("-")))a&&(t=t.slice(5),o=!0),t==="class"||t==="className"?V(e,r):i&&!o&&!u?e[Tr(t)]=r:e[c||t]=r;else{const f=l&&t.indexOf(":")>-1&&br[t.split(":")[0]];f?yr(e,f,t,r):Fe(e,fr[t]||t,r)}return r}function $r(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return r||document}});r;){const n=r[t];if(n&&!r.disabled){const l=r[`${t}Data`];if(l!==void 0?n.call(r,l,e):n.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function te(e,t,r,n,l){for(;typeof r=="function";)r=r();if(t===r)return r;const s=typeof t,i=n!==void 0;if(e=i&&r[0]&&r[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),i){let o=r[0];o&&o.nodeType===3?o.data=t:o=document.createTextNode(t),r=Y(e,r,n,o)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t;else if(t==null||s==="boolean")r=Y(e,r,n);else{if(s==="function")return j(()=>{let o=t();for(;typeof o=="function";)o=o();r=te(e,o,r,n)}),()=>r;if(Array.isArray(t)){const o=[],u=r&&Array.isArray(r);if(qe(o,t,r,l))return j(()=>r=te(e,o,r,n,!0)),()=>r;if(o.length===0){if(r=Y(e,r,n),i)return r}else u?r.length===0?at(e,o,n):vr(e,r,o):(r&&Y(e),at(e,o));r=o}else if(t.nodeType){if(Array.isArray(r)){if(i)return r=Y(e,r,n,t);Y(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}else console.warn("Unrecognized value. Skipped inserting",t)}return r}function qe(e,t,r,n){let l=!1;for(let s=0,i=t.length;s<i;s++){let o=t[s],u=r&&r[s],c;if(!(o==null||o===!0||o===!1))if((c=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))l=qe(e,o,u)||l;else if(c==="function")if(n){for(;typeof o=="function";)o=o();l=qe(e,Array.isArray(o)?o:[o],Array.isArray(u)?u:[u])||l}else e.push(o),l=!0;else{const a=String(o);u&&u.nodeType===3&&u.data===a?e.push(u):e.push(document.createTextNode(a))}}return l}function at(e,t,r=null){for(let n=0,l=t.length;n<l;n++)e.insertBefore(t[n],r)}function Y(e,t,r,n){if(r===void 0)return e.textContent="";const l=n||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const o=t[i];if(l!==o){const u=o.parentNode===e;!s&&!i?u?e.replaceChild(l,o):e.insertBefore(l,r):u&&o.remove()}else s=!0}}else e.insertBefore(l,r);return[l]}const Er=!1;const ze=Symbol("store-raw"),de=Symbol("store-node");function St(e){let t=e[B];if(!t&&(Object.defineProperty(e,B,{value:t=new Proxy(e,Sr)}),!Array.isArray(e))){const r=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let l=0,s=r.length;l<s;l++){const i=r[l];n[i].get&&Object.defineProperty(e,i,{enumerable:n[i].enumerable,get:n[i].get.bind(t)})}}return t}function H(e){let t;return e!=null&&typeof e=="object"&&(e[B]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function re(e,t=new Set){let r,n,l,s;if(r=e!=null&&e[ze])return r;if(!H(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,o=e.length;i<o;i++)l=e[i],(n=re(l,t))!==l&&(e[i]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let u=0,c=i.length;u<c;u++)s=i[u],!o[s].get&&(l=e[s],(n=re(l,t))!==l&&(e[s]=n))}return e}function Qe(e){let t=e[de];return t||Object.defineProperty(e,de,{value:t=Object.create(null)}),t}function Ve(e,t,r){return e[t]||(e[t]=jt(r))}function Ar(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===B||t===de||(delete r.value,delete r.writable,r.get=()=>e[B][t]),r}function _t(e){if(yt()){const t=Qe(e);(t._||(t._=jt()))()}}function Pr(e){return _t(e),Reflect.ownKeys(e)}function jt(e){const[t,r]=Oe(e,{equals:!1,internal:!0});return t.$=r,t}const Sr={get(e,t,r){if(t===ze)return e;if(t===B)return r;if(t===pe)return _t(e),r;const n=Qe(e),l=n[t];let s=l?l():e[t];if(t===de||t==="__proto__")return s;if(!l){const i=Object.getOwnPropertyDescriptor(e,t);yt()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(s=Ve(n,t,s)())}return H(s)?St(s):s},has(e,t){return t===ze||t===B||t===pe||t===de||t==="__proto__"?!0:(this.get(e,t,e),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Pr,getOwnPropertyDescriptor:Ar};function I(e,t,r,n=!1){if(!n&&e[t]===r)return;const l=e[t],s=e.length;r===void 0?delete e[t]:e[t]=r;let i=Qe(e),o;if((o=Ve(i,t,l))&&o.$(()=>r),Array.isArray(e)&&e.length!==s){for(let u=e.length;u<s;u++)(o=i[u])&&o.$();(o=Ve(i,"length",s))&&o.$(e.length)}(o=i._)&&o.$()}function Ct(e,t){const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const l=r[n];I(e,l,t[l])}}function _r(e,t){if(typeof t=="function"&&(t=t(e)),t=re(t),Array.isArray(t)){if(e===t)return;let r=0,n=t.length;for(;r<n;r++){const l=t[r];e[r]!==l&&I(e,r,l)}I(e,"length",n)}else Ct(e,t)}function ae(e,t,r=[]){let n,l=e;if(t.length>1){n=t.shift();const i=typeof n,o=Array.isArray(e);if(Array.isArray(n)){for(let u=0;u<n.length;u++)ae(e,[n[u]].concat(t),r);return}else if(o&&i==="function"){for(let u=0;u<e.length;u++)n(e[u],u)&&ae(e,[u].concat(t),r);return}else if(o&&i==="object"){const{from:u=0,to:c=e.length-1,by:a=1}=n;for(let f=u;f<=c;f+=a)ae(e,[f].concat(t),r);return}else if(t.length>1){ae(e[n],t,[n].concat(r));return}l=e[n],r=[n].concat(r)}let s=t[0];typeof s=="function"&&(s=s(l,r),s===l)||n===void 0&&s==null||(s=re(s),n===void 0||H(l)&&H(s)&&!Array.isArray(s)?Ct(l,s):I(e,n,s))}function Ye(...[e,t]){const r=re(e||{}),n=Array.isArray(r),l=St(r);function s(...i){Zt(()=>{n&&i.length===1?_r(r,i[0]):ae(r,i)})}return[l,s]}const Ue=Symbol("store-root");function Z(e,t,r,n,l){const s=t[r];if(e===s)return;if(r!==Ue&&(!H(e)||!H(s)||l&&e[l]!==s[l])){I(t,r,e);return}if(Array.isArray(e)){if(e.length&&s.length&&(!n||l&&e[0]&&e[0][l]!=null)){let u,c,a,f,h,g,x,m;for(a=0,f=Math.min(s.length,e.length);a<f&&(s[a]===e[a]||l&&s[a]&&e[a]&&s[a][l]===e[a][l]);a++)Z(e[a],s,a,n,l);const $=new Array(e.length),P=new Map;for(f=s.length-1,h=e.length-1;f>=a&&h>=a&&(s[f]===e[h]||l&&s[a]&&e[a]&&s[f][l]===e[h][l]);f--,h--)$[h]=s[f];if(a>h||a>f){for(c=a;c<=h;c++)I(s,c,e[c]);for(;c<e.length;c++)I(s,c,$[c]),Z(e[c],s,c,n,l);s.length>e.length&&I(s,"length",e.length);return}for(x=new Array(h+1),c=h;c>=a;c--)g=e[c],m=l&&g?g[l]:g,u=P.get(m),x[c]=u===void 0?-1:u,P.set(m,c);for(u=a;u<=f;u++)g=s[u],m=l&&g?g[l]:g,c=P.get(m),c!==void 0&&c!==-1&&($[c]=s[u],c=x[c],P.set(m,c));for(c=a;c<e.length;c++)c in $?(I(s,c,$[c]),Z(e[c],s,c,n,l)):I(s,c,e[c])}else for(let u=0,c=e.length;u<c;u++)Z(e[u],s,u,n,l);s.length>e.length&&I(s,"length",e.length);return}const i=Object.keys(e);for(let u=0,c=i.length;u<c;u++)Z(e[i[u]],s,i[u],n,l);const o=Object.keys(s);for(let u=0,c=o.length;u<c;u++)e[o[u]]===void 0&&I(s,o[u],void 0)}function Ne(e,t={}){const{merge:r,key:n="id"}=t,l=re(e);return s=>{if(!H(s)||!H(l))return l;const i=Z(l,{[Ue]:s},Ue,r,n);return i===void 0?s:i}}var jr=(e,t)=>{let r;const n=()=>clearTimeout(r);return er()&&We(n),Object.assign((...s)=>{r!==void 0&&n(),r=setTimeout(()=>e(...s),t)},{clear:n})},U=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},y={},M={},Mt=U&&U.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var s in l)l.hasOwnProperty(s)&&(n[s]=l[s])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(M,"__esModule",{value:!0});M.buildLexer=M.extractByTokenRange=M.extractByPositionRange=M.TokenRangeError=M.TokenError=void 0;function Ke(e){return e===void 0?"<END-OF-FILE>":JSON.stringify(e)}var Nt=function(e){Mt(t,e);function t(r,n){var l=e.call(this,Ke(r)+": "+n)||this;return l.pos=r,l.errorMessage=n,l}return t}(Error);M.TokenError=Nt;var Cr=function(e){Mt(t,e);function t(r,n,l){var s=e.call(this,Ke(r)+" - "+Ke(n)+": "+l)||this;return s.first=r,s.next=n,s.errorMessage=l,s}return t}(Error);M.TokenRangeError=Cr;function It(e,t,r){var n=t===void 0?e.length:t.index,l=r===void 0?e.length:r.index;return n>=l?"":e.substring(n,l)}M.extractByPositionRange=It;function Mr(e,t,r){return It(e,t===void 0?void 0:t.pos,r===void 0?void 0:r.pos)}M.extractByTokenRange=Mr;var Nr=function(){function e(t,r,n,l,s,i){this.lexer=t,this.input=r,this.kind=n,this.text=l,this.pos=s,this.keep=i}return Object.defineProperty(e.prototype,"next",{get:function(){return this.nextToken===void 0&&(this.nextToken=this.lexer.parseNextAvailable(this.input,this.pos.index+this.text.length,this.pos.rowEnd,this.pos.columnEnd),this.nextToken===void 0&&(this.nextToken=null)),this.nextToken===null?void 0:this.nextToken},enumerable:!1,configurable:!0}),e}(),Ir=function(){function e(t){this.rules=t;for(var r=0,n=this.rules;r<n.length;r++){var l=n[r];if(l[1].source[0]!=="^")throw new Error('Regular expression patterns for a tokenizer should start with "^": '+l[1].source);if(!l[1].global)throw new Error("Regular expression patterns for a tokenizer should be global: "+l[1].source)}}return e.prototype.parse=function(t){return this.parseNextAvailable(t,0,1,1)},e.prototype.parseNext=function(t,r,n,l){if(r!==t.length){for(var s=t.substr(r),i,o=0,u=this.rules;o<u.length;o++){var c=u[o],a=c[0],f=c[1],h=c[2];if(f.lastIndex=0,f.test(s)){for(var g=s.substr(0,f.lastIndex),x=n,m=l,$=0,P=g;$<P.length;$++){var N=P[$];switch(N){case"\r":break;case`
`:x++,m=1;break;default:m++}}var C=new Nr(this,t,h,g,{index:r,rowBegin:n,columnBegin:l,rowEnd:x,columnEnd:m},a);(i===void 0||i.text.length<C.text.length)&&(i=C)}}if(i===void 0)throw new Nt({index:r,rowBegin:n,columnBegin:l,rowEnd:n,columnEnd:l},"Unable to tokenize the rest of the input: "+t.substr(r));return i}},e.prototype.parseNextAvailable=function(t,r,n,l){for(var s;;){if(s=this.parseNext(t,s===void 0?r:s.pos.index+s.text.length,s===void 0?n:s.pos.rowEnd,s===void 0?l:s.pos.columnEnd),s===void 0)return;if(s.keep)return s}},e}();function Dr(e){return new Ir(e)}M.buildLexer=Dr;var S={};Object.defineProperty(S,"__esModule",{value:!0});S.unableToConsumeToken=S.resultOrError=S.betterError=void 0;function Br(e,t){return e===void 0?t:t===void 0||e.pos===void 0?e:t.pos===void 0||e.pos.index<t.pos.index?t:(e.pos.index>t.pos.index,e)}S.betterError=Br;function Lr(e,t,r){return r?{candidates:e,successful:!0,error:t}:{successful:!1,error:t}}S.resultOrError=Lr;function Rr(e){return{kind:"Error",pos:e===void 0?void 0:e.pos,message:"Unable to consume token: "+(e===void 0?"<END-OF-FILE>":e.text)}}S.unableToConsumeToken=Rr;var _={};Object.defineProperty(_,"__esModule",{value:!0});_.tok=_.str=_.fail=_.succ=_.nil=void 0;var Dt=S;function Fr(){return{parse:function(e){return{candidates:[{firstToken:e,nextToken:e,result:void 0}],successful:!0,error:void 0}}}}_.nil=Fr;function qr(e){return{parse:function(t){return{candidates:[{firstToken:t,nextToken:t,result:e}],successful:!0,error:void 0}}}}_.succ=qr;function zr(e){return{parse:function(t){return{successful:!1,error:{kind:"Error",pos:t?.pos,message:e}}}}}_.fail=zr;function Vr(e){return{parse:function(t){return t===void 0||t.text!==e?{successful:!1,error:Dt.unableToConsumeToken(t)}:{candidates:[{firstToken:t,nextToken:t.next,result:t}],successful:!0,error:void 0}}}}_.str=Vr;function Ur(e){return{parse:function(t){return t===void 0||t.kind!==e?{successful:!1,error:Dt.unableToConsumeToken(t)}:{candidates:[{firstToken:t,nextToken:t.next,result:t}],successful:!0,error:void 0}}}}_.tok=Ur;var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.combine=void 0;var ft=S;function Kr(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return{parse:function(n){var l=e.parse(n);if(!l.successful)return l;for(var s=l.candidates,i=l.error,o=0,u=t;o<u.length;o++){var c=u[o];if(s.length===0)break;var a=s;s=[];for(var f=0,h=a;f<h.length;f++){var g=h[f],x=c(g.result).parse(g.nextToken);if(i=ft.betterError(i,x.error),x.successful)for(var m=0,$=x.candidates;m<$.length;m++){var P=$[m];s.push({firstToken:g.firstToken,nextToken:P.nextToken,result:P.result})}}}return ft.resultOrError(s,i,s.length!==0)}}}Ee.combine=Kr;var ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.seq=void 0;var dt=S;function Hr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{parse:function(r){for(var n,l=[{firstToken:r,nextToken:r,result:[]}],s=0,i=e;s<i.length;s++){var o=i[s];if(l.length===0)break;var u=l;l=[];for(var c=0,a=u;c<a.length;c++){var f=a[c],h=o.parse(f.nextToken);if(n=dt.betterError(n,h.error),h.successful)for(var g=0,x=h.candidates;g<x.length;g++){var m=x[g];l.push({firstToken:f.firstToken,nextToken:m.nextToken,result:f.result.concat([m.result])})}}}return dt.resultOrError(l,n,l.length!==0)}}}ce.seq=Hr;var he={};Object.defineProperty(he,"__esModule",{value:!0});he.alt=void 0;var ht=S;function Xr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{parse:function(r){for(var n,l=[],s=!1,i=0,o=e;i<o.length;i++){var u=o[i],c=u.parse(r);n=ht.betterError(n,c.error),c.successful&&(l=l.concat(c.candidates),s=!0)}return ht.resultOrError(l,n,s)}}}he.alt=Xr;var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.alt_sc=void 0;var gt=S;function Gr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{parse:function(r){for(var n,l=0,s=e;l<s.length;l++){var i=s[l],o=i.parse(r);if(n=gt.betterError(n,o.error),o.successful)return gt.resultOrError(o.candidates,n,!0)}return{successful:!1,error:n}}}}Ae.alt_sc=Gr;var ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.opt_sc=ne.opt=void 0;var Wr=he,Jr=_;function Qr(e){return Wr.alt(e,Jr.nil())}ne.opt=Qr;function Yr(e){return{parse:function(t){var r=e.parse(t);return r.successful?r:{candidates:[{firstToken:t,nextToken:t,result:void 0}],successful:!0,error:r.error}}}}ne.opt_sc=Yr;var O={},D={};Object.defineProperty(D,"__esModule",{value:!0});D.kmid=D.kright=D.kleft=D.apply=void 0;var Ze=ce;function Pe(e,t){return{parse:function(r){var n=e.parse(r);return n.successful?{candidates:n.candidates.map(function(l){return{firstToken:r,nextToken:l.nextToken,result:t(l.result,[r,l.nextToken])}}),successful:!0,error:n.error}:n}}}D.apply=Pe;function Zr(e,t){return Pe(Ze.seq(e,t),function(r){return r[0]})}D.kleft=Zr;function en(e,t){return Pe(Ze.seq(e,t),function(r){return r[1]})}D.kright=en;function tn(e,t,r){return Pe(Ze.seq(e,t,r),function(n){return n[1]})}D.kmid=tn;var rn=U&&U.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),l=0,t=0;t<r;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,l++)n[l]=s[i];return n};Object.defineProperty(O,"__esModule",{value:!0});O.lrec_sc=O.lrec=O.list_n=O.list_sc=O.list=O.rep_n=O.repr=O.rep_sc=O.rep=void 0;var z=D,se=S,ge=ce,nn=_;function et(e){var t=Bt(e);return{parse:function(r){var n=t.parse(r);return n.successful?{candidates:n.candidates.reverse(),successful:!0,error:n.error}:n}}}O.rep=et;function tt(e){return{parse:function(t){for(var r,n=[{firstToken:t,nextToken:t,result:[]}];;){var l=n;n=[];for(var s=0,i=l;s<i.length;s++){var o=i[s],u=e.parse(o.nextToken);if(r=se.betterError(r,u.error),u.successful)for(var c=0,a=u.candidates;c<a.length;c++){var f=a[c];f.nextToken!==o.nextToken&&n.push({firstToken:o.firstToken,nextToken:f.nextToken,result:o.result.concat([f.result])})}}if(n.length===0){n=l;break}}return se.resultOrError(n,r,!0)}}}O.rep_sc=tt;function Bt(e){return{parse:function(t){for(var r,n=[{firstToken:t,nextToken:t,result:[]}],l=0;l<n.length;l++){var s=n[l],i=e.parse(s.nextToken);if(r=se.betterError(r,i.error),i.successful)for(var o=0,u=i.candidates;o<u.length;o++){var c=u[o];c.nextToken!==s.nextToken&&n.push({firstToken:s.firstToken,nextToken:c.nextToken,result:s.result.concat([c.result])})}}return se.resultOrError(n,r,!0)}}}O.repr=Bt;function Lt(e,t){return{parse:function(r){for(var n,l=[{firstToken:r,nextToken:r,result:[]}],s=0;s<t;s++){for(var i=[],o=0,u=l;o<u.length;o++){var c=u[o],a=e.parse(c.nextToken);if(n=se.betterError(n,a.error),a.successful)for(var f=0,h=a.candidates;f<h.length;f++){var g=h[f];i.push({firstToken:c.firstToken,nextToken:g.nextToken,result:c.result.concat([g.result])})}}if(i.length===0)return{successful:!1,error:n};l=i}return se.resultOrError(l,n,!0)}}}O.rep_n=Lt;function rt(e){var t=e[0],r=e[1];return rn([t],r)}function sn(e,t){return z.apply(ge.seq(e,et(z.kright(t,e))),rt)}O.list=sn;function ln(e,t){return z.apply(ge.seq(e,tt(z.kright(t,e))),rt)}O.list_sc=ln;function on(e,t,r){return r<1?nn.succ([]):r===1?z.apply(e,function(n){return[n]}):z.apply(ge.seq(e,Lt(z.kright(t,e),r-1)),rt)}O.list_n=on;function Rt(e){return function(t){for(var r=t[0],n=0,l=t[1];n<l.length;n++){var s=l[n];r=e(r,s)}return r}}function un(e,t,r){return z.apply(ge.seq(e,et(t)),Rt(r))}O.lrec=un;function cn(e,t,r){return z.apply(ge.seq(e,tt(t)),Rt(r))}O.lrec_sc=cn;var Se={};Object.defineProperty(Se,"__esModule",{value:!0});Se.amb=void 0;function an(e){return{parse:function(t){var r=e.parse(t);if(!r.successful)return r;for(var n=new Map,l=0,s=r.candidates;l<s.length;l++){var i=s[l],o=n.get(i.nextToken);o===void 0?n.set(i.nextToken,[i]):o.push(i)}return{candidates:Array.from(n.values()).map(function(u){return{firstToken:u[0].firstToken,nextToken:u[0].nextToken,result:u.map(function(c){return c.result})}}),successful:!0,error:r.error}}}}Se.amb=an;var le={};Object.defineProperty(le,"__esModule",{value:!0});le.errd=le.err=void 0;function fn(e,t){return{parse:function(r){var n=e.parse(r);return n.successful?n:{successful:!1,error:{kind:"Error",pos:n.error.pos,message:t}}}}}le.err=fn;function dn(e,t,r){return{parse:function(n){var l=e.parse(n);return l.successful?l:{successful:!0,candidates:[{firstToken:n,nextToken:n,result:r}],error:{kind:"Error",pos:l.error.pos,message:t}}}}}le.errd=dn;var K={};Object.defineProperty(K,"__esModule",{value:!0});K.expectSingleResult=K.expectEOF=K.rule=void 0;var Ie=M,bt=S,hn=function(){function e(){}return e.prototype.setPattern=function(t){this.parser=t},e.prototype.parse=function(t){if(this.parser===void 0)throw new Error("Rule has not been initialized. setPattern is required before calling parse.");return this.parser.parse(t)},e}();function gn(){return new hn}K.rule=gn;function bn(e){if(!e.successful)return e;if(e.candidates.length===0)return{successful:!1,error:{kind:"Error",pos:void 0,message:"No result is returned."}};for(var t=[],r=e.error,n=0,l=e.candidates;n<l.length;n++){var s=l[n];s.nextToken===void 0?t.push(s):r=bt.betterError(r,{kind:"Error",pos:s.nextToken===void 0?void 0:s.nextToken.pos,message:'The parser cannot reach the end of file, stops at "'+s.nextToken.text+'" at position '+JSON.stringify(s.nextToken.pos)+"."})}return bt.resultOrError(t,r,t.length!==0)}K.expectEOF=bn;function vn(e){if(!e.successful)throw new Ie.TokenError(e.error.pos,e.error.message);if(e.candidates.length===0)throw new Ie.TokenError(void 0,"No result is returned.");if(e.candidates.length!==1)throw new Ie.TokenError(void 0,"Multiple results are returned.");return e.candidates[0].result}K.expectSingleResult=vn;var ie={};Object.defineProperty(ie,"__esModule",{value:!0});ie.makeParserModule=ie.lazy=void 0;function Ft(e){return{parse:function(t){return e().parse(t)}}}ie.lazy=Ft;var pn=function(e,t,r){return Object.defineProperty(e,t,{configurable:!0,writable:!1,enumerable:!0,value:r})};function yn(e){for(var t=Object.create(null),r=function(u,c){t=pn(t,u,Ft(function(){return c(t)}))},n=0,l=Object.entries(e);n<l.length;n++){var s=l[n],i=s[0],o=s[1];r(i,o)}return t}ie.makeParserModule=yn;(function(e){var t=U&&U.__createBinding||(Object.create?function(n,l,s,i){i===void 0&&(i=s),Object.defineProperty(n,i,{enumerable:!0,get:function(){return l[s]}})}:function(n,l,s,i){i===void 0&&(i=s),n[i]=l[s]}),r=U&&U.__exportStar||function(n,l){for(var s in n)s!=="default"&&!l.hasOwnProperty(s)&&t(l,n,s)};Object.defineProperty(e,"__esModule",{value:!0}),r(M,e),r(S,e),r(_,e),r(Ee,e),r(ce,e),r(he,e),r(Ae,e),r(ne,e),r(O,e),r(D,e),r(Se,e),r(le,e),r(K,e),r(ie,e)})(y);var p=(e=>(e[e.Sym=0]="Sym",e[e.Const=1]="Const",e[e.Mul=2]="Mul",e[e.Add=3]="Add",e[e.Sub=4]="Sub",e[e.Div=5]="Div",e))(p||{});class mn{constructor(t){this.value=t}type=0;isConst(){return!1}isBinOp(){return!1}constEval(){}references(){return[this.value]}}class wn{constructor(t){this.value=t}type=1;isConst(){return!0}isBinOp(){return!1}constEval(){return this.value}references(){return[]}}class ve{constructor(t,r,n){this.type=t,this.left=r,this.right=n}isConst(){return this.left.isConst()&&this.right.isConst()}isBinOp(){return!0}constEval(){if(this.isConst())switch(this.type){case 2:return this.left.constEval()*this.right.constEval();case 3:return this.left.constEval()+this.right.constEval();case 4:return this.left.constEval()-this.right.constEval();case 5:return this.left.constEval()/this.right.constEval()}}references(){return this.left.references().concat(this.right.references())}}const xn=y.buildLexer([[!0,/^\-?\d+(\.\d+)?/g,0],[!0,/^[a-zA-Z]+/g,1],[!0,/^\+/g,2],[!0,/^\-/g,3],[!0,/^\*/g,4],[!0,/^\//g,5],[!0,/^\(/g,6],[!0,/^\)/g,7],[!1,/^\s+/g,8]]);function kn(e){return new wn(+e.text)}function On(e){return new mn(e.text)}function qt(e,t){switch(t[0].text){case"+":return new ve(p.Add,e,t[1]);case"-":return new ve(p.Sub,e,t[1]);case"*":return new ve(p.Mul,e,t[1]);case"/":return new ve(p.Div,e,t[1]);default:throw new Error(`Unknown binary operator: ${t[0].text}`)}}const He=y.rule(),Xe=y.rule(),nt=y.rule();He.setPattern(y.alt(y.apply(y.tok(0),kn),y.apply(y.tok(1),On),y.kmid(y.str("("),nt,y.str(")"))));Xe.setPattern(y.lrec_sc(He,y.seq(y.alt(y.str("*"),y.str("/")),He),qt));nt.setPattern(y.lrec_sc(Xe,y.seq(y.alt(y.str("+"),y.str("-")),Xe),qt));const zt=e=>e.split(`
`).filter(r=>r.length>0).map(r=>{const[n,l]=r.split("="),s=y.expectSingleResult(y.expectEOF(nt.parse(xn.parse(l))));return[n.trim(),s]}).reduce((r,[n,l])=>({...r,[n]:l}),{});var R=(e=>(e[e.Dependent=0]="Dependent",e[e.Bound=1]="Bound",e[e.Free=2]="Free",e))(R||{});class st{}class De extends st{constructor(t,r){super(),this.symbol=t,this.calculation=r}type=0;attemptBinding(t){if(this.calculation.type===0){const r=t.get(this.calculation.dependencies);if(r!=null)return new G(this.symbol,r.value)}else{const[r,...n]=this.calculation.dependencies,l=t.get(r);if(l==null)return this;let s=l.value;for(const i of n){const o=t.get(i);if(o==null)return this;switch(this.calculation.type){case 1:s+=o.value;break;case 2:s-=o.value;break;case 3:s*=o.value;break;case 4:s/=o.value;break}}return new G(this.symbol,s)}return this}}class G extends st{constructor(t,r){super(),this.symbol=t,this.value=r}type=1;attemptBinding(t){return this}}class Vt extends st{constructor(t){super(),this.symbol=t}type=2;attemptBinding(t){const r=t.get(this.symbol);return r!=null?new G(this.symbol,r.value):this}}var T=(e=>(e[e.Ref=0]="Ref",e[e.Add=1]="Add",e[e.Sub=2]="Sub",e[e.Mul=3]="Mul",e[e.Div=4]="Div",e))(T||{});const Ut=e=>e.filter(t=>t instanceof Vt).sort((t,r)=>t.symbol.localeCompare(r.symbol)),Tn=(e,t)=>{let r=500,n=!0;for(;r-- >0&&n;){n=!1;for(let l=0;l<e.length;l++){const s=e[l].attemptBinding(t);n||=s!==e[l],e[l]=s,e[l]instanceof G&&t.set(e[l].symbol,e[l])}}return{completed:$n(e),result:e}},$n=e=>e.reduce((t,r)=>t&&r instanceof G,!0);class En{counter=0;next(){return(this.counter++).toString(16)}}const Kt=e=>{const t=new Set;for(const n of Object.values(e))for(const l of n.references())t.add(l);for(const n of Object.keys(e))t.delete(n);const r=new An;for(const n of t)r.addFreeVariable(n);for(const n of Object.values(e))r.addExpression(n);for(const[n,l]of Object.entries(e))r.addBinding(n,l);return r.output};class An{output=[];ssaTable=new Map;freeTable=new Map;counter=new En;referenceTable=new Map;constructor(){}addFreeVariable(t){if(!this.freeTable.has(t)){const r=new Vt(t);this.output.push(r),this.freeTable.set(t,r)}}addExpression(t){const r=t.constEval();if(r!=null)return this.addConst(t,r);switch(t.type){case p.Sym:return this.addRef(t);case p.Const:return this.addConst(t,t.value);case p.Mul:case p.Add:case p.Sub:case p.Div:return this.addBinOp(t)}}addRef(t){const r=this.referenceTable.get(t.value);if(r)return r.symbol;const n=`r${this.counter.next()}`;this.ssaTable.set(t,n);const l=new De(n,{type:T.Ref,dependencies:t.value});return this.output.push(l),this.referenceTable.set(t.value,l),n}addConst(t,r){const n=`c${this.counter.next()}`;return this.ssaTable.set(t,n),this.output.push(new G(n,r)),n}addBinOp(t){let r,n;switch(t.type){case p.Mul:r=T.Mul,n=`m${this.counter.next()}`;break;case p.Add:r=T.Add,n=`a${this.counter.next()}`;break;case p.Sub:r=T.Sub,n=`s${this.counter.next()}`;break;case p.Div:r=T.Div,n=`d${this.counter.next()}`;break}return this.ssaTable.set(t,n),this.output.push(new De(n,{type:r,dependencies:[this.addExpression(t.left),this.addExpression(t.right)]})),n}addBinding(t,r){const n=this.ssaTable.get(r);if(!n)throw new Error("symbol not found, this should never happen");this.output.push(new De(t,{type:T.Ref,dependencies:n}))}}const Pn=`x = y * 2
y = z + z - p / 5
z = 12`,Sn=()=>Oe(Pn),_n=e=>Ye({error:null,tree:e}),jn=e=>Ye({input:e,freeVariables:Ut(e),bindings:{}}),Cn=()=>Ye({completed:!0,result:[]});class Mn{constructor(t,r,n,l,s,i,o,u){this.setParseTree=t,this.parseTree=r,this.setSolverInput=n,this.solverInput=l,this.setSolution=s,this.solution=i,this.setText=o,this.text=u,this.setRules=jr(c=>{console.log("parsing equations",c);let a;try{a=zt(c),this.setParseTree(Ne({error:null,tree:a})),console.log("parsed",a)}catch(h){this.setParseTree("error",h),console.error("parsingError",h)}let f;try{f=Kt(a),this.setSolverInput(Ne({input:f,freeVariables:Ut(f),bindings:this.solverInput.bindings})),console.log("compiled",f)}catch(h){console.error("compiler error",h)}this.attemptSolve()},150)}setRules;attemptSolve(){const t=this.solverInput.input.map(l=>l),r=new Map;for(const[l,s]of Object.entries(this.solverInput.bindings))s!=null&&r.set(l,new G(l,s));const n=Tn(t,r);this.setSolution(Ne(n)),console.log("solved",n)}}const Nn=()=>{const[e,t]=Sn(),r=zt(e()),[n,l]=_n(r),s=Kt(r),[i,o]=jn(s),[u,c]=Cn();return new Mn(l,n,o,i,c,u,t,e)},In=["bg-fuchsia-200","bg-teal-200","bg-lime-200","bg-sky-200","bg-indigo-200","bg-cyan-200"],Ht=["border-sky-300","border-indigo-300","border-cyan-300","border-fuchsia-300","border-teal-300","border-rose-300","border-lime-300"],Dn=e=>{let t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);t=(t<<5)-t+n,t|=0}return t},Xt=(...e)=>e.join(" "),Bn=e=>lt(In,e),Ln=e=>Fn(Ht,e),Rn=e=>lt(Ht,e),Fn=(e,t)=>lt(e,Dn(t)),lt=(e,t)=>e[t%e.length],qn=v('<svg stroke-width="0"></svg>',2),zn=v("<title></title>",2);function _e(e,t){const r=it(e.a,t),[n,l]=ir(r,["src"]);return(()=>{const s=qn.cloneNode(!0);return kr(s,it({get stroke(){return e.a.stroke},get color(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},l,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},get innerHTML(){return e.c},xmlns:"http://www.w3.org/2000/svg"}),!0,!0),b(s,()=>Er,null),b(s,(()=>{const i=L(()=>!!t.title);return()=>i()&&(()=>{const o=zn.cloneNode(!0);return b(o,()=>t.title),o})()})(),null),s})()}function Vn(e){return _e({a:{viewBox:"0 0 1024 1024"},c:'<path d="M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"/><path d="M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"/>'},e)}function Un(e){return _e({a:{viewBox:"0 0 1024 1024"},c:'<path d="M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"/><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"/>'},e)}function Kn(e){return _e({a:{viewBox:"0 0 1024 1024"},c:'<path d="M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"/><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"/>'},e)}function Hn(e){return _e({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M8 12h8M12 16h0M12 8h0"/><circle cx="12" cy="12" r="10"/>'},e)}const Gt=v("<div>"),Xn=v('<div><h3 class="text-lg mb-2"></h3><div class="flex gap-2 items-center">'),Ge=e=>d(ue,{get fallback(){return d(Jn,{get node(){return e.value},get depth(){return e.depth}})},get children(){return[d(w,{get when(){return e.value.type===p.Sym?e.value:!1},children:t=>d(Gn,{get symbol(){return t()}})}),d(w,{get when(){return e.value.type===p.Const?e.value:!1},children:t=>d(Wn,{get constant(){return t()}})})]}}),Gn=e=>(()=>{const t=Gt();return b(t,()=>e.symbol.value),j(()=>V(t,Xt("rounded px-2 border-2",Ln(e.symbol.value)))),t})(),Wn=e=>(()=>{const t=Gt();return b(t,()=>e.constant.value),j(()=>V(t,Xt("rounded border-2 border-slate-500 px-2",Bn(e.constant.value)))),t})(),Jn=e=>(()=>{const t=Xn(),r=t.firstChild,n=r.nextSibling;return b(r,d(fe,{get type(){return e.node.type}})),b(n,d(Ge,{get value(){return e.node.left},get depth(){return e.depth+1}}),null),b(n,d(Ge,{get value(){return e.node.right},get depth(){return e.depth+1}}),null),j(()=>V(t,"rounded border-2 p-1 "+Rn(e.depth))),t})(),fe=e=>d(ue,{get children(){return[d(w,{get when(){return e.type===p.Add},get children(){return d(Kn,{})}}),d(w,{get when(){return e.type===p.Sub},get children(){return d(Un,{})}}),d(w,{get when(){return e.type===p.Div},get children(){return d(Hn,{})}}),d(w,{get when(){return e.type===p.Mul},get children(){return d(Vn,{})}})]}}),Qn=v('<div class="flex flex-col sm:flex-row gap-2 flex-wrap">'),Yn=v('<div class="flex flex-col gap-1 border-2 border-slate rounded min-w-[6rem]"><div class="flex gap-2 border-b border-slate-200 p-2"><h2 class="bold"></h2><span>=</span></div><div class="flex items-center justify-center grow p-2">'),Zn=e=>{const t=()=>{const r=Object.entries(e.ast);return r.sort(),r};return(()=>{const r=Qn();return b(r,d(or,{get each(){return t()},children:n=>d(es,{get lhs(){return n[0]},get rhs(){return n[1]}})})),r})()},es=e=>(()=>{const t=Yn(),r=t.firstChild,n=r.firstChild,l=r.nextSibling;return b(n,()=>e.lhs),b(l,d(Ge,{get value(){return e.rhs},depth:0})),t})(),ts=v('<div class="flex flex-col gap-4">'),rs=v('<div class="flex gap-2"><label></label> =<input class="border border-zinc-200 rounded" type="number">'),ns=e=>(()=>{const t=ts();return b(t,d(At,{get each(){return e.value},children:r=>d(ss,{get value(){return r()},get bindings(){return e.bindings},get setBindings(){return e.setBindings}})})),t})(),ss=e=>{const t=r=>{if(r.currentTarget.value!=null&&r.currentTarget.value!==""){const n=parseFloat(r.currentTarget.value);if(!isNaN(n)){e.setBindings(e.value.symbol,n);return}}e.setBindings(e.value.symbol,null)};return(()=>{const r=rs(),n=r.firstChild,l=n.nextSibling,s=l.nextSibling;return b(n,()=>e.value.symbol),s.$$keyup=t,r})()};Je(["keyup"]);const ls=v('<div class="flex gap-8 flex-wrap text-sm">'),is=v("<div><div>"),os=v("<h2>"),us=v("<div>Bound"),cs=v("<div>Free"),as=v("<div>Dependent"),fs=v('<div class="text-xs flex justify-between">'),ds=v('<div class="text-xl px-2 py-4 flex flex-col grow justify-center items-center">'),hs=v("<div>"),gs=v('<div class="flex justify-center items-center">'),bs=v('<div class="flex items-center justify-start">'),vs=v('<div class="flex items-center justify-end">'),ps=v('<div class="flex grow flex-col justify-center items-stretch gap-2 text-lg px-4 py-2">'),ys=v('<div class="flex flex-row justify-center items-center"> '),ms=e=>{const t=n=>new Set(Object.keys(e.ast).concat(e.freeVariables.map(s=>s.symbol))).has(n),r=()=>{const n=e.outputs.filter(s=>t(s.symbol)),l=e.outputs.filter(s=>!t(s.symbol));return n.sort((s,i)=>s.symbol.localeCompare(i.symbol)),n.concat(l)};return(()=>{const n=ls();return b(n,d(At,{get each(){return r()},children:l=>(()=>{const s=is(),i=s.firstChild;return b(s,d(xs,{get node(){return l()}}),i),b(i,d(ws,{get node(){return l()}}),null),b(i,d(ks,{get node(){return l()}}),null),j(o=>{const u="transition-all hover:opacity-100 "+(t(l().symbol)?"":"opacity-20"),c=As(l());return u!==o._v$&&V(s,o._v$=u),c!==o._v$2&&V(i,o._v$2=c),o},{_v$:void 0,_v$2:void 0}),s})()})),n})()},ws=e=>(()=>{const t=os();return b(t,()=>e.node.symbol),j(()=>V(t,"py-2 px-4 border-b-2 "+Wt(e.node.type))),t})(),xs=e=>(()=>{const t=fs();return b(t,d(ue,{get children(){return[d(w,{get when(){return e.node.type===R.Bound},get children(){return us()}}),d(w,{get when(){return e.node.type===R.Free},get children(){return cs()}}),d(w,{get when(){return e.node.type===R.Dependent},get children(){return[as(),d(Ts,{get type(){return e.node.calculation.type}})]}})]}})),t})(),ks=e=>d(ue,{get children(){return[d(w,{get when(){return e.node.type===R.Bound?e.node:!1},children:t=>d(vt,{get children(){return t().value.toFixed(2)}})}),d(w,{get when(){return e.node.type===R.Dependent?e.node:!1},children:t=>d(Os,{get calculation(){return t().calculation}})}),d(w,{get when(){return e.node.type===R.Free},get children(){return d(vt,{children:"Requires Input"})}})]}}),vt=e=>{const t=J(()=>e.children);return(()=>{const r=ds();return b(r,t),r})()},Os=e=>d(Es,{get calculation(){return e.calculation},get children(){return d($s,{get type(){return e.calculation.type}})}}),Ts=e=>(()=>{const t=hs();return b(t,d(ue,{get children(){return[d(w,{get when(){return e.type===T.Ref},children:"Ref"}),d(w,{get when(){return e.type===T.Div},children:"Div"}),d(w,{get when(){return e.type===T.Mul},children:"Mul"}),d(w,{get when(){return e.type===T.Add},children:"Add"}),d(w,{get when(){return e.type===T.Sub},children:"Sub"})]}})),t})(),$s=e=>(()=>{const t=gs();return b(t,d(ue,{get children(){return[d(w,{get when(){return e.type===T.Ref},children:"&"}),d(w,{get when(){return e.type===T.Div},get children(){return d(fe,{get type(){return p.Div}})}}),d(w,{get when(){return e.type===T.Mul},get children(){return d(fe,{get type(){return p.Mul}})}}),d(w,{get when(){return e.type===T.Add},get children(){return d(fe,{get type(){return p.Add}})}}),d(w,{get when(){return e.type===T.Sub},get children(){return d(fe,{get type(){return p.Sub}})}})]}})),t})(),Es=e=>{const t=J(()=>e.children);return(()=>{const r=ps();return b(r,d(Pt,{get when(){return e.calculation.type!==T.Ref},get fallback(){return(()=>{const n=ys(),l=n.firstChild;return b(n,t,l),b(n,()=>e.calculation.dependencies,null),n})()},get children(){return[(()=>{const n=bs();return b(n,()=>e.calculation.dependencies[0]),n})(),L(()=>t()),(()=>{const n=vs();return b(n,()=>e.calculation.dependencies[1]),n})()]}})),r})()},As=e=>"flex flex-col rounded border-2 w-44 h-48 transition-all "+Wt(e.type),Wt=e=>{switch(e){case R.Bound:return" border-green-500 bg-green-100 ";case R.Free:return" border-red-500 bg-red-100 ";case R.Dependent:return" border-zinc-200 bg-zinc-100 "}},Ps=v('<div class="p-8"><h1 class="text-2xl my-2 mb-4">Solver'),Ss=v('<div class="flex gap-2 flex-wrap items-stretch justify-around mb-1">'),_s=v('<textarea class="overflow-hidden flex-grow rounded border-2 h-32 w-full border-zinc-200 block">'),js=v("<div>"),Cs=v('<div class="flex gap-2 flex-col sm:flex-row">'),Ms=v('<div><h2 class="mb-4 text-xl">'),Ns=()=>{const e=Nn();return e.attemptSolve(),d(Is,{get children(){return[d(Ds,{get children(){return[d(Bs,{app:e}),d(Ls,{app:e})]}}),d(Rs,{get children(){return[d(Fs,{app:e}),d(qs,{app:e})]}})]}})},Is=e=>{const t=J(()=>e.children);return(()=>{const r=Ps();return r.firstChild,b(r,t,null),r})()},Ds=e=>{const t=J(()=>e.children);return(()=>{const r=Ss();return b(r,t),r})()},Bs=e=>d(je,{title:"Equations",class:["w-1/3"],get children(){return[(()=>{const t=_s();return t.$$keyup=r=>{e.app.setText(r.currentTarget.value),e.app.setRules(r.currentTarget.value)},j(()=>t.value=e.app.text()),t})(),(()=>{const t=js();return b(t,d(Pt,{get when(){return e.app.parseTree.error},children:r=>r().message})),j(()=>V(t,e.app.parseTree.error?"mt-2 border-2 rounded bg-red-100 border-red-500":"")),t})()]}}),Ls=e=>d(je,{title:"Parse Tree",class:["grow"],get children(){return d(Zn,{get ast(){return e.app.parseTree.tree}})}}),Rs=e=>{const t=J(()=>e.children);return(()=>{const r=Cs();return b(r,t),r})()},Fs=e=>d(je,{title:"inputs",get children(){return d(ns,{get value(){return e.app.solverInput.freeVariables},get bindings(){return e.app.solverInput.bindings},setBindings:(t,r)=>{e.app.setSolverInput("bindings",t,r),e.app.attemptSolve()}})}}),qs=e=>d(je,{title:"Outputs",get children(){return d(ms,{get outputs(){return e.app.solution.result},get freeVariables(){return e.app.solverInput.freeVariables},get ast(){return e.app.parseTree.tree}})}}),je=e=>{const t=J(()=>e.children);return(()=>{const r=Ms(),n=r.firstChild;return b(n,()=>e.title),b(r,t,null),j(()=>V(r,`transition-all my-2 border-2 border-slate-100 rounded p-8 hover:shadow ${e.class?e.class.join(" "):""}`)),r})()};Je(["keyup"]);const zs=document.getElementById("root");pr(()=>d(Ns,{}),zs);
